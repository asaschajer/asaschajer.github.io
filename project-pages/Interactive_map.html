

<!-- 
  IMPORTANT! 
  
  Keep this file unchanged to use as a template for all future project pages. 

  For every new project you add to your portfolio, make a copy of this file in the
  'project-pages' folder with a name related to the project.
-->


<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>Leaflet</title>
		<meta name="description" content="A portfolio template for the Unemployables community.">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/utilities.css">

		<script defer src="../js/script.js"></script>


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="index.html" class="logo">
									<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Phantom</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="vector.html">Vector</a></li>
							<li><a href="choropleth.html">Choropleth</a></li>
							<li><a href="landuse.html">Land Cover</a></li>
							<li><a href="DEM.html">DEM</a></li>
							<li><a href="gee.html">Carbon Sequestration</a></li>
							<li><a href="about.html">About</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Choropleth Map</h1>
							<p>Describe the map - SDG here.</p>
							<span class="image main"><img src="images/choropleth15_1_1.png" alt="" /></span>
							
							<h1>Leaflet</h1>
							<p>We made this example in class on day 2</p>
					
					<!-- UPDATE - add your leaflet code here! I already added the necessary headers - make sure you move your js file into the root directory too -->
							<div id='map'></div>
<script type="text/javascript" src="SDG15v3.js"></script>
<script type="text/javascript">

	const map = L.map('map').setView([10, 10], 2);

//UPDATE above - notice the SDG15v3.js file - that is my geometry file - replace that file with your own! => DONE
//call the basemap you want to use
	const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	}).addTo(map);

	// control that shows attribute info on hover
	const info = L.control();

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	};

		//UPDATE to call your own data for the interactivity- the name after "props" is the attribute name - look in your js file to find the attribute to call 
		// change class breaks and color depending on your values //UPDATE for our own legend - use colorbrewer.org for ideas for colors
		//UPDATE legend to match the classes you coded - and the source of your data needs to reference the correct link
	info.update = function (props) {
		const contents = props ? `<b>${props.nam_en}</b><br />${props.percentage} % of global citizenship education and education for sustainable development mainstreamed in curricula` : 'Hover over a state';
		this._div.innerHTML = `<h4>4.7.1 Extent to which global citizenship education and education for sustainable development are mainstreamed in curricula</h4>${contents}`;
	};

	info.addTo(map);


	
	
	function getColor(d) {
		return d > 100 ? '#005a32' :
			d > 90  ? '#238443' :
			d > 80  ? '#41ab5d' :
			d > 70  ? '#78c679' :
			d > 60  ? '#addd8e' :
			d > 50   ? '#d9f0a3' :
			d > 47.1   ? '#f7fcb9' :
			d > 0   ? '#ffffe5' : '#f7fcf5';
	}

//update the fill color to your variable 
	function style(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor(feature.properties.percentage)
		};
	}

	function highlightFeature(e) {
		const layer = e.target;

		layer.setStyle({
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
		});

		layer.bringToFront();

		info.update(layer.feature.properties);
	}

	/* global statesData */ //UPDATE nationData
	const geojson = L.geoJson(nationData, {
		style,
		onEachFeature
	}).addTo(map);

	function resetHighlight(e) {
		geojson.resetStyle(e.target);
		info.update();
	}

	function zoomToFeature(e) {
		map.fitBounds(e.target.getBounds());
	}

	function onEachFeature(feature, layer) {
		layer.on({
			mouseover: highlightFeature,
			mouseout: resetHighlight,
			click: zoomToFeature
		});
	}

	map.attributionControl.addAttribution('SDG data &copy; <a href="https://unstats-undesa.opendata.arcgis.com/">UN SDG DataHub</a>');



	const legend = L.control({position: 'bottomright'});

	legend.onAdd = function (map) {

		const div = L.DomUtil.create('div', 'info legend');
		const grades = [0, 47.1, 50, 60, 70, 80, 90];
		const labels = [];
		let from, to;

		for (let i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(`<i style="background:${getColor(from + 1)}"></i> ${from}${to ? `&ndash;${to}` : '+'}`);
		}

		labels.push(`<i style="background:#FFFFFF"></i>  No Data`);

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);

</script>
						<!-- extra credit - make your own esri online map- otherwise delete this section -->
						<h1>ArcGIS Online</h1>
							<p>Here is my choropleth map I made with real UN SDG indicator data. During a live in class demo in 2024. It is interactive but not great. You can make your own version using Esri online</p>
						<iframe src="https://uni-utrecht.maps.arcgis.com/apps/instant/basic/index.html?appid=e0472c006c72436fbd8a6be0b1814603" width="100%" height="800px" frameborder="0" style="border:0" allowfullscreen>iFrames are not supported on this page.</iframe>
						
						
						</div>
					</div>

<!-- FOOTER -->
		<div id="footer">
		  <!-- 
			TODO - Change href to your Instagram account (can also delete entire "a" element if no Instagram) 

			This should be the same across all pages.
		  -->
		  <a class="icon-link" target="_blank" href="https://twitter.com/whitevans_eth">
			<image src="../assets/icons/instagram.svg" class="footer-icon"/>
		  </a>
		  <!-- 
			TODO - Change href to your Twitter account (can also delete entire "a" element if no Twitter) 
		  
			This should be the same across all pages.
		  -->
		  <a class="icon-link" target="_blank" href="https://twitter.com/whitevans_eth">
			<image src="../assets/icons/twitter.svg" class="footer-icon"/>
		  </a>
		  <!-- 
			TODO - Change the email after "mailto" to your contact email 
		  
			This should be the same across all pages.
		  -->
		  <a class="icon-link" href="mailto:whitevans.eth@gmail.com">
			<image src="../assets/icons/mail.svg" class="footer-icon"/>
		  </a>
		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>